;PlatformIO Project Configuration File
;
; STM32串口配置板项目配置
; STM32 Serial Configuration Board Project Configuration  
;
; Build options: build flags, source filter
; Upload options: custom upload port, speed and extra flags
; Library options: dependencies, extra library storages
; Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:stm32f103c8_128k]
platform = ststm32
board = genericSTM32F103C8
framework = stm32cube

; 自定义配置 / Custom Configuration
board_build.ldscript = STM32F103C8Tx_FLASH.ld
board_build.mcu = stm32f103c8t6
board_build.f_cpu = 72000000L

; 源文件目录 / Source directories
src_dir = firmware/src
include_dir = firmware/inc

; 编译选项 / Build options
build_flags = 
    -DUSE_HAL_DRIVER
    -DSTM32F103xB
    -DHSE_VALUE=8000000
    -Os
    -Wall
    -ffunction-sections
    -fdata-sections
    -Wl,--gc-sections
    -mcpu=cortex-m3
    -mthumb

; 调试配置 / Debug configuration
debug_tool = stlink
debug_init_break = tbreak main

; 上传配置 / Upload configuration  
upload_protocol = stlink
upload_flags = 
    --connect-under-reset

; 库依赖 / Library dependencies
lib_deps = 

; 串口监控 / Serial monitor
monitor_speed = 115200
monitor_port = COM3  ; 根据实际情况修改 / Modify according to actual situation

; 额外脚本 / Extra scripts
;extra_scripts = 
;    pre:scripts/pre_build.py
;    post:scripts/post_build.py